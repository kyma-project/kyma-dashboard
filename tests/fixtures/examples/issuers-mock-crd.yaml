kind: CustomResourceDefinition
apiVersion: apiextensions.k8s.io/v1
metadata:
  name: issuers.cert.gardener.cloud
  labels:
    app.kubernetes.io/instance: shoot-cert-management-shoot
    app.kubernetes.io/managed-by: Tiller
    app.kubernetes.io/name: gardener-extension-shoot-cert-service
    resources.gardener.cloud/managed-by: gardener
spec:
  group: cert.gardener.cloud
  names:
    plural: issuers
    singular: issuer
    shortNames:
      - issuer
    kind: Issuer
    listKind: IssuerList
  scope: Namespaced
  versions:
    - name: v1alpha1
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          description: Issuer is the issuer CR.
          type: object
          required:
            - spec
          properties:
            apiVersion:
              description: >-
                APIVersion defines the versioned schema of this representation
                of an object. Servers should convert recognized schemas to the
                latest internal value, and may reject unrecognized values. More
                info:
                https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: >-
                Kind is a string value representing the REST resource this
                object represents. Servers may infer this from the endpoint the
                client submits requests to. Cannot be updated. In CamelCase.
                More info:
                https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: IssuerSpec is the spec of the issuer.
              type: object
              properties:
                acme:
                  description: ACME is the ACME protocol specific spec.
                  type: object
                  required:
                    - email
                    - server
                  properties:
                    autoRegistration:
                      description: >-
                        AutoRegistration is the flag if automatic registration
                        should be applied if needed.
                      type: boolean
                    domains:
                      description: >-
                        Domains optionally specifies domains allowed or
                        forbidden for certificate requests
                      type: object
                      properties:
                        exclude:
                          description: >-
                            Exclude are domain names for which certificate
                            requests are forbidden (including any subdomains)
                          type: array
                          items:
                            type: string
                        include:
                          description: >-
                            Include are domain names for which certificate
                            requests are allowed (including any subdomains)
                          type: array
                          items:
                            type: string
                    email:
                      description: Email is the email address to use for user registration.
                      type: string
                    externalAccountBinding:
                      description: >-
                        ACMEExternalAccountBinding is a reference to a CA
                        external account of the ACME server.
                      type: object
                      required:
                        - keyID
                        - keySecretRef
                      properties:
                        keyID:
                          description: >-
                            keyID is the ID of the CA key that the External
                            Account is bound to.
                          type: string
                        keySecretRef:
                          description: >-
                            keySecretRef is the secret ref to the Secret which
                            holds the symmetric MAC key of the External Account
                            Binding with data key 'hmacKey'. The secret key
                            stored in the Secret **must** be un-padded, base64
                            URL encoded data.
                          type: object
                          properties:
                            name:
                              description: >-
                                Name is unique within a namespace to reference a
                                secret resource.
                              type: string
                            namespace:
                              description: >-
                                Namespace defines the space within which the
                                secret name must be unique.
                              type: string
                    precheckNameservers:
                      description: >-
                        PrecheckNameservers overwrites the default precheck
                        nameservers used for checking DNS propagation. Format
                        `host` or `host:port`, e.g. "8.8.8.8" same as
                        "8.8.8.8:53" or "google-public-dns-a.google.com:53".
                      type: array
                      items:
                        type: string
                    privateKeySecretRef:
                      description: >-
                        PrivateKeySecretRef is the secret ref to the ACME
                        private key.
                      type: object
                      properties:
                        name:
                          description: >-
                            Name is unique within a namespace to reference a
                            secret resource.
                          type: string
                        namespace:
                          description: >-
                            Namespace defines the space within which the secret
                            name must be unique.
                          type: string
                    server:
                      description: Server is the URL of the ACME server.
                      type: string
                    skipDNSChallengeValidation:
                      description: >-
                        SkipDNSChallengeValidation marks that this issuer does
                        not validate DNS challenges. In this case no DNS
                        entries/records are created for a DNS Challenge and DNS
                        propagation is not checked.
                      type: boolean
                ca:
                  description: CA is the CA specific spec.
                  type: object
                  properties:
                    privateKeySecretRef:
                      description: PrivateKeySecretRef is the secret ref to the CA secret.
                      type: object
                      properties:
                        name:
                          description: >-
                            Name is unique within a namespace to reference a
                            secret resource.
                          type: string
                        namespace:
                          description: >-
                            Namespace defines the space within which the secret
                            name must be unique.
                          type: string
                requestsPerDayQuota:
                  description: >-
                    RequestsPerDayQuota is the maximum number of certificate
                    requests per days allowed for this issuer
                  type: integer
            status:
              description: IssuerStatus is the status of the issuer.
              type: object
              required:
                - state
              properties:
                acme:
                  description: ACME is the ACME specific status.
                  type: object
                  x-kubernetes-preserve-unknown-fields: true
                ca:
                  description: CA is the CA specific status.
                  type: object
                  x-kubernetes-preserve-unknown-fields: true
                message:
                  description: Message is the status or error message.
                  type: string
                observedGeneration:
                  description: ObservedGeneration is the observed generation of the spec.
                  type: integer
                  format: int64
                requestsPerDayQuota:
                  description: >-
                    RequestsPerDayQuota is the actual maximum number of
                    certificate requests per days allowed for this issuer
                  type: integer
                state:
                  description: State is either empty, 'Pending', 'Error', or 'Ready'.
                  type: string
                type:
                  description: >-
                    Type is the issuer type. Currently only 'acme' and 'ca' are
                    supported.
                  type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: SERVER
          type: string
          description: ACME Server
          jsonPath: .spec.acme.server
        - name: EMAIL
          type: string
          description: ACME Registration email
          jsonPath: .spec.acme.email
        - name: STATUS
          type: string
          description: Status of registration
          jsonPath: .status.state
        - name: TYPE
          type: string
          description: Issuer type
          jsonPath: .status.type
        - name: AGE
          type: date
          description: object creation timestamp
          jsonPath: .metadata.creationTimestamp
        - name: INCLUDED_DOMAINS
          type: string
          description: included domains
          priority: 2000
          jsonPath: .spec.acme.domains.include
  conversion:
    strategy: None
status:
  conditions:
    - type: NamesAccepted
      status: 'True'
      lastTransitionTime: '2023-05-31T07:56:27Z'
      reason: NoConflicts
      message: no conflicts found
    - type: Established
      status: 'True'
      lastTransitionTime: '2023-05-31T07:56:27Z'
      reason: InitialNamesAccepted
      message: the initial names have been accepted
  acceptedNames:
    plural: issuers
    singular: issuer
    shortNames:
      - issuer
    kind: Issuer
    listKind: IssuerList
  storedVersions:
    - v1alpha1
